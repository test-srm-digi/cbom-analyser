@use '../styles/variables' as *;

// ── Shared badge mixin ──────────────────────────────────────
@mixin badge($bg, $text, $ring) {
  display: inline-flex;
  align-items: center;
  gap: 4px;
  font-size: 11px;
  font-weight: 600;
  padding: 3px 8px;
  border-radius: 9999px;
  box-shadow: inset 0 0 0 1px $ring;
  background: $bg;
  color: $text;
}

@mixin smallBadge($bg, $text) {
  display: inline-flex;
  align-items: center;
  gap: 3px;
  font-size: 10px;
  font-weight: 500;
  padding: 2px 6px;
  border-radius: 4px;
  background: $bg;
  color: $text;
}

// ── Container ────────────────────────────────────────────────
.card {
  background: $dc1-card;
  border: 1px solid $dc1-border;
  border-radius: $dc1-radius;
  animation: fadeIn 0.4s ease forwards;
}

.emptyCard {
  @extend .card;
  padding: 24px;
  text-align: center;
}

.emptyIcon {
  width: 32px;
  height: 32px;
  color: $dc1-text-secondary;
  margin: 0 auto 8px;
}

.emptyText {
  font-size: 14px;
  color: $dc1-text-secondary;
}

.emptyHint {
  font-size: 12px;
  color: $dc1-text-muted;
  margin-top: 4px;
}

// ── Header bar ───────────────────────────────────────────────
.header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 12px 16px;
  border-bottom: 1px solid $dc1-border;
}

.headerLeft {
  display: flex;
  align-items: center;
  gap: 12px;
}

.headerTitle {
  font-size: 14px;
  font-weight: 600;
  color: $dc1-text;
  display: flex;
  align-items: center;
  gap: 8px;
}

.headerTitleIcon {
  width: 16px;
  height: 16px;
  color: $warning-200; // amber
}

.headerCount {
  font-size: 10px;
  color: $dc1-text-secondary;
  background: $dc1-bg;
  padding: 2px 8px;
  border-radius: 9999px;
}

.headerRight {
  display: flex;
  align-items: center;
  gap: 12px;
}

.summaryBadges {
  display: flex;
  align-items: center;
  gap: 8px;
  font-size: 10px;
}

.badgeSafe       { color: $dc1-success; }
.badgeVulnerable { color: $dc1-danger; }
.badgeConditional{ color: $chart-cyan; }
.badgeSep        { color: $dc1-text-secondary; }
.badgeMuted      { color: $dc1-text-secondary; }

.filterSelect {
  background: $dc1-bg;
  border: 1px solid $dc1-border;
  border-radius: $dc1-radius-sm;
  padding: 4px 8px;
  font-size: 12px;
  color: $dc1-text-secondary;
}

// ── List ─────────────────────────────────────────────────────
.list {
  > * + * {
    border-top: 1px solid rgba($dc1-border, 0.5);
  }
}

.libRow {
  padding: 12px 16px;
  transition: background $transition-fast;

  &:hover {
    background: rgba($dc1-bg, 0.3);
  }
}

.libMain {
  display: flex;
  align-items: center;
  justify-content: space-between;
  cursor: pointer;
}

.libLeft {
  display: flex;
  align-items: center;
  gap: 12px;
}

.libIcon {
  width: 16px;
  height: 16px;
  color: $dc1-text-secondary;
  flex-shrink: 0;
}

.libName {
  font-size: 14px;
  color: $dc1-text;
  font-weight: 500;
}

.libVersion {
  font-size: 12px;
  color: $dc1-text-secondary;
}

.libRight {
  display: flex;
  align-items: center;
  gap: 12px;
}

.algoCount {
  font-size: 10px;
  color: $dc1-text-secondary;
}

.chevron {
  width: 14px;
  height: 14px;
  color: $dc1-text-secondary;
}

// ── Name row badges ──────────────────────────────────────────
.nameRow {
  display: flex;
  align-items: center;
  gap: 8px;
}

// Tailwind-free local vars for status badges
$_safe-color:    $success-200;
$_danger-color:  $error-100;
$_cond-color:    #0E7490; // conditional teal (no DS equivalent)
$_unknown-color: $neutral-800;
$_amber:         $warning-100;
$_amber-dark:    $warning-200;

.transitiveBadge {
  @include smallBadge(rgba($_amber, 0.1), rgba($_amber-dark, 0.8));
}

.pkgMaven   { @include smallBadge(rgba($_amber, 0.1), $_amber); }
.pkgGradle  { @include smallBadge(rgba($dc1-success, 0.1), $dc1-success); }
.pkgNpm     { @include smallBadge(rgba($dc1-danger, 0.1), $dc1-danger); }
.pkgPip     { @include smallBadge(rgba($dc1-blue, 0.1), $dc1-blue); }
.pkgGo      { @include smallBadge(rgba($chart-cyan, 0.1), $chart-cyan); }
.pkgDefault { @include smallBadge(rgba($dc1-text-secondary, 0.1), $dc1-text-secondary); }

.libSub {
  font-size: 10px;
  color: $dc1-text-secondary;
  margin-top: 2px;
}

// ── Safety badges ────────────────────────────────────────────
.safeBadge    { @include badge(rgba($_safe-color, 0.14), $_safe-color, rgba($_safe-color, 0.35)); }
.notSafeBadge { @include badge(rgba($_danger-color, 0.14), $_danger-color, rgba($_danger-color, 0.35)); }
.condBadge    { @include badge(rgba($_cond-color, 0.14), $_cond-color, rgba($_cond-color, 0.35)); }
.unknownBadge { @include badge(rgba($_unknown-color, 0.12), $_unknown-color, rgba($_unknown-color, 0.3)); }

.badgeIcon {
  width: 11px;
  height: 11px;
}

// ── Expanded details ─────────────────────────────────────────
.details {
  margin-top: 12px;
  margin-left: 28px;
  display: flex;
  flex-direction: column;
  gap: 12px;
}

.depPath {
  display: flex;
  align-items: center;
  gap: 6px;
  font-size: 10px;
  color: $dc1-text-secondary;
}

.depPathIcon {
  width: 12px;
  height: 12px;
}

.depArrow {
  color: $dc1-text-muted;
}

.depSeg {
  color: $dc1-text-secondary;
}

.algosLabel {
  font-size: 10px;
  color: $dc1-text-secondary;
  font-weight: 500;
  text-transform: uppercase;
  letter-spacing: 0.05em;
}

.algosWrap {
  display: flex;
  flex-wrap: wrap;
  gap: 6px;
  margin-top: 6px;
}

.algoChip {
  font-size: 10px;
  padding: 2px 8px;
  border-radius: $dc1-radius-sm;
  background: $dc1-bg;
  border: 1px solid $dc1-border;
  color: $dc1-text-secondary;
}
